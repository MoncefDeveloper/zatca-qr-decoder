<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZATCA QR Decoder</title>
    <link rel="icon" type="image/svg+xml" href="images/moncefdev-logo-black-bg.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="background"></div>

    <div class="container">
      <div class="header">
        <div class="header-controls">
          <div class="tooltip">
            <button class="control-btn" id="tutorialBtn" title="Tutorial">
              <i class="fas fa-question"></i>
            </button>
            <span class="tooltiptext" data-i18n="tutorialTooltip"
              >Interactive Tutorial</span
            >
          </div>
          <div class="tooltip">
            <button
              class="control-btn"
              id="shortcutsBtn"
              title="Keyboard Shortcuts"
            >
              <i class="fas fa-cog"></i>
            </button>
            <span class="tooltiptext" data-i18n="shortcutsTooltip"
              >Keyboard Shortcuts</span
            >
          </div>
          <div class="tooltip">
            <button class="control-btn" id="themeToggle" title="Toggle theme">
              <i class="fas fa-moon"></i>
            </button>
            <span class="tooltiptext" data-i18n="themeTooltip"
              >Toggle Theme</span
            >
          </div>
          <div class="tooltip">
            <div class="lang-dropdown">
              <button
                class="control-btn"
                id="langToggle"
                title="Toggle language"
              >
                <i class="fas fa-globe"></i>
                <span class="lang-current">EN</span>
              </button>
              <div class="lang-menu" id="langMenu">
                <div class="lang-option" data-lang="en">English</div>
                <div class="lang-option" data-lang="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</div>
                <div class="lang-option" data-lang="fr">Fran√ßais</div>
              </div>
            </div>
            <span class="tooltiptext" data-i18n="langTooltip"
              >Toggle Language</span
            >
          </div>
        </div>
        <div class="logo">
          <div class="logo-icon">
            <img src="images/moncefdev-logo-white.png" width="30" height="30" alt="MoncefDev Logo" 
              style="object-fit: cover;"
            />
          </div>
        </div>
        <h1 class="title" data-i18n="title">ZATCA QR Decoder</h1>
        <p class="subtitle" data-i18n="subtitle">
          Professional Saudi Arabian tax invoice QR code decoder. Extract
          complete invoice information instantly with enterprise-grade accuracy.
        </p>
      </div>

      <!-- History Section -->
      <div class="history-section" id="historySection">
        <h2 class="section-title">
          <div class="section-icon">üìö</div>
          <span data-i18n="historyTitle">Recent Decodes</span>
        </h2>
        <div id="historyList">
          <p class="empty-state" data-i18n="historyEmpty">
            No recent decodes yet
          </p>
        </div>
      </div>

      <div class="main-content">
        <div class="input-section">
          <h2 class="section-title">
            <div class="section-icon">üìÑ</div>
            <span data-i18n="inputTitle">Input QR Code</span>
          </h2>

          <!-- Upload section -->
          <!-- <div class="input-group">
            <label class="input-label" data-i18n="uploadLabel"
              >Upload QR Code Image</label
            >
            <div class="upload-container">
              <input
                type="file"
                id="qrImageUpload"
                accept="image/*"
                style="display: none"
                multiple
              />
              <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üì∑</div>
                <div class="upload-text" data-i18n="uploadText">
                  Click or drag QR image here
                </div>
                <div class="upload-subtext" data-i18n="uploadSubtext">
                  Supports JPG, PNG, WebP
                </div>
              </div>
              <div
                class="upload-preview"
                id="uploadPreview"
                style="display: none"
              >
                <img id="previewImg" src="" alt="QR Preview" />
                <button class="remove-btn" id="removeImage">‚úï</button>
              </div>
            </div>
          </div> -->

          <div class="input-group">
            <label class="input-label" data-i18n="inputLabel"
              >Base64 Encoded QR Data</label
            >
            <textarea
              id="qrInput"
              class="input-field"
              data-i18n-placeholder="inputPlaceholder"
              placeholder="Paste your ZATCA QR code data here..."
              spellcheck="false"
            >
AQpNb25jZWYgRGV2CgAxMjM0NTY3ODkwEzIwMjMtMDEtMDFUMTI6MDA6MDAEBjEwMC4wMAUEMTUuMDA=</textarea
            >
          </div>

          <button class="decode-button" onclick="decodeQR()">
            <span>üöÄ</span>
            <span data-i18n="decodeButton">Decode QR Code</span>
          </button>
        </div>

        <div class="result-section">
          <h2 class="section-title">
            <div class="section-icon">üìä</div>
            <span data-i18n="resultsTitle">Decoded Results</span>
          </h2>

          <div id="emptyState" class="empty-state">
            <div class="empty-state-icon">‚ö°</div>
            <p data-i18n="emptyState">
              Enter your QR code data and click decode to see the results here
            </p>
          </div>

          <div id="loadingState" class="loading">
            <div class="spinner"></div>
          </div>

          <div id="skeletonState" class="skeleton-state" style="display: none">
            <div class="skeleton skeleton-field"></div>
            <div class="skeleton skeleton-field"></div>
            <div class="skeleton skeleton-field"></div>
          </div>

          <div id="resultContent" class="result-content">
            <!-- Results will be populated here -->
          </div>
        </div>
      </div>

      <div class="info-section">
        <h2 class="section-title">
          <div class="section-icon">‚ÑπÔ∏è</div>
          <span data-i18n="howItWorks">How It Works</span>
        </h2>
        <div class="info-grid">
          <div class="info-card">
            <div class="info-card-icon">üîê</div>
            <div class="info-card-title" data-i18n="secureProcessing">
              Secure Processing
            </div>
            <div class="info-card-text" data-i18n="secureProcessingText">
              All decoding happens in your browser. Your data never leaves your
              device.
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-icon">‚ö°</div>
            <div class="info-card-title" data-i18n="instantResults">
              Instant Results
            </div>
            <div class="info-card-text" data-i18n="instantResultsText">
              Get complete invoice information in milliseconds with our
              optimized decoder.
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-icon">üéØ</div>
            <div class="info-card-title" data-i18n="zatcaCompliant">
              ZATCA Compliant
            </div>
            <div class="info-card-text" data-i18n="zatcaCompliantText">
              Fully compliant with Saudi Arabian tax authority QR code
              standards.
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-icon">üåê</div>
            <div class="info-card-title" data-i18n="multiLanguage">
              Multi-Language
            </div>
            <div class="info-card-text" data-i18n="multiLanguageText">
              Supports Arabic, English, and French text with proper UTF-8
              encoding.
            </div>
          </div>
        </div>
      </div>

      <footer
        style="
          text-align: center;
          padding: 40px 20px;
          margin-top: 60px;
          border-top: 1px solid var(--border-color);
        "
      >
        <p style="color: var(--text-secondary); font-size: 0.9rem">
          <span data-i18n="footer">Created with ‚ù§Ô∏è by</span>
          <strong style="color: #667eea">
            <a href="https://moncefdev.me/" target="_blank">MoncefDev</a>
          </strong>
        </p>
      </footer>
    </div>

    <!-- Tutorial Modal -->
    <div class="tutorial-modal" id="tutorialModal">
      <div class="tutorial-content">
        <button class="tutorial-close" id="tutorialClose">‚úï</button>
        <h2 data-i18n="tutorialTitle">Welcome to ZATCA QR Decoder</h2>
        <div id="tutorialSteps">
          <div class="tutorial-step" data-step="0">
            <h3 data-i18n="tutorialStep1Title">Getting Started</h3>
            <p data-i18n="tutorialStep1Text">
              This tool helps you decode ZATCA QR codes from Saudi Arabian tax
              invoices. You can either upload an image or paste the Base64
              encoded data directly.
            </p>
          </div>
          <div class="tutorial-step" data-step="1">
            <h3 data-i18n="tutorialStep2Title">Upload QR Image</h3>
            <p data-i18n="tutorialStep2Text">
              Click or drag your QR code image to the upload area. Supported
              formats include JPG, PNG, and WebP.
            </p>
          </div>
          <div class="tutorial-step" data-step="2">
            <h3 data-i18n="tutorialStep3Title">Enter Base64 Data</h3>
            <p data-i18n="tutorialStep3Text">
              Alternatively, paste the Base64 encoded QR data directly into the
              text area.
            </p>
          </div>
          <div class="tutorial-step" data-step="3">
            <h3 data-i18n="tutorialStep4Title">Decode & Export</h3>
            <p data-i18n="tutorialStep4Text">
              Click "Decode QR Code" to extract the information. You can copy
              individual fields or export the entire result.
            </p>
          </div>
          <div class="tutorial-step" data-step="4">
            <h3 data-i18n="tutorialStep5Title">Keyboard Shortcuts</h3>
            <p data-i18n="tutorialStep5Text">
              Use Ctrl+K to focus the input field and Ctrl+Enter to decode
              quickly.
            </p>
          </div>
        </div>
        <div class="tutorial-navigation">
          <button
            class="tutorial-nav-btn"
            id="tutorialPrev"
            data-i18n="tutorialPrev"
          >
            Previous
          </button>
          <button
            class="tutorial-nav-btn"
            id="tutorialNext"
            data-i18n="tutorialNext"
          >
            Next
          </button>
          <button
            class="tutorial-nav-btn"
            id="tutorialConfirm"
            style="display: none"
            data-i18n="tutorialConfirm"
          >
            Got it!
          </button>
        </div>
        <div class="tutorial-dots" id="tutorialDots"></div>
      </div>
    </div>

    <div class="shortcuts-modal" id="shortcutsModal">
      <div class="shortcuts-content">
        <button class="shortcuts-close" id="shortcutsClose">‚úï</button>
        <h2 data-i18n="shortcutsTitle">Keyboard Shortcuts</h2>
        <div class="shortcuts-list">
          <div class="shortcut-item">
            <div class="shortcut-keys">
              <span class="shortcut-key">Ctrl</span>
              <span class="shortcut-plus">+</span>
              <span class="shortcut-key">K</span>
            </div>
            <div class="shortcut-desc" data-i18n="shortcutFocus">
              Focus Input
            </div>
          </div>
          <div class="shortcut-item">
            <div class="shortcut-keys">
              <span class="shortcut-key">Ctrl</span>
              <span class="shortcut-plus">+</span>
              <span class="shortcut-key">Enter</span>
            </div>
            <div class="shortcut-desc" data-i18n="shortcutDecode">Decode</div>
          </div>
        </div>
        <div class="shortcuts-note" data-i18n="shortcutsNote">
          These shortcuts work anywhere in the application
        </div>
      </div>
    </div>

    <!-- Success Animation -->
    <div class="success-animation" id="successAnimation">‚úì</div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

    <!-- Our Scripts -->
    <script src="js/translations.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
